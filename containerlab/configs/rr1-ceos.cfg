! RR1 Arista cEOS Route Reflector Configuration
! BGP Route Reflector for AURORA-IBN testing

hostname rr1-ceos
!
username admin privilege 15 secret admin
!
management api http-commands
   no shutdown
!
management api gnmi
   transport grpc default
   provider eos-native
!
management api netconf
   transport ssh default
!
interface Management1
   ip address dhcp
!
interface Loopback0
   ip address 10.0.0.21/32
!
interface Ethernet2
   description to-P1-core
   no switchport
   ip address 10.1.3.2/30
!
interface Ethernet3
   description to-PE1-direct
   no switchport
   ip address 10.1.2.2/30
!
interface Ethernet4
   description to-PE2-direct
   no switchport
   ip address 10.1.2.6/30
!
router isis ISIS-MAIN
   net 49.0001.0100.0000.0021.00
   is-type level-2
   !
   address-family ipv4 unicast
!
interface Loopback0
   isis enable ISIS-MAIN
!
interface Ethernet2
   isis enable ISIS-MAIN
!
interface Ethernet3
   isis enable ISIS-MAIN
!
interface Ethernet4
   isis enable ISIS-MAIN
!
mpls ip
!
mpls ldp
   router-id interface Loopback0
   no shutdown
!
interface Ethernet2
   mpls ldp igp sync
!
interface Ethernet3
   mpls ldp igp sync
!
interface Ethernet4
   mpls ldp igp sync
!
router bgp 65000
   router-id 10.0.0.21
   bgp route-reflector preserve-attributes always
   !
   ! PE1 client
   neighbor 10.0.0.1 remote-as 65000
   neighbor 10.0.0.1 update-source Loopback0
   neighbor 10.0.0.1 route-reflector-client
   neighbor 10.0.0.1 next-hop-self
   !
   ! PE2 client  
   neighbor 10.0.0.2 remote-as 65000
   neighbor 10.0.0.2 update-source Loopback0
   neighbor 10.0.0.2 route-reflector-client
   neighbor 10.0.0.2 next-hop-self
   !
   ! PE3 client
   neighbor 10.0.0.3 remote-as 65000
   neighbor 10.0.0.3 update-source Loopback0
   neighbor 10.0.0.3 route-reflector-client
   neighbor 10.0.0.3 next-hop-self
   !
   address-family ipv4
      neighbor 10.0.0.1 activate
      neighbor 10.0.0.2 activate
      neighbor 10.0.0.3 activate
   !
   address-family vpn-ipv4
      neighbor 10.0.0.1 activate
      neighbor 10.0.0.2 activate
      neighbor 10.0.0.3 activate
   !
   address-family evpn
      neighbor 10.0.0.1 activate
      neighbor 10.0.0.2 activate
      neighbor 10.0.0.3 activate
!
end